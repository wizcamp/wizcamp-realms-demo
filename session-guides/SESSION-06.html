<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>SESSION-06 - Wizcamp Session Guide</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <style type="text/css">

@page {
margin: 0.6in 0.75in 0.6in 0.75in;
size: letter;
}
body {
font-family: "Amulya Variable", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
font-size: 16px;
line-height: 1.4;
color: #2d3748;
margin: 0;
padding: 0;
max-width: none;
overflow-x: hidden !important;
}

* {
scrollbar-width: none !important;
-ms-overflow-style: none !important;
}
*::-webkit-scrollbar {
display: none !important;
}

html, body {
overflow-x: hidden !important;
width: 100% !important;
max-width: 100% !important;
}
h1, h2, h3, h4, h5, h6 {
font-family: "Plein Variable", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
font-weight: 500;
line-height: 1.25;
margin-bottom: 16px;
margin-top: 24px;
color: #1a202c;
}
h1 {
font-size: 1.75em;
border-bottom: 1px solid #d0d7de;
padding-bottom: 0.3em;
margin-top: 0;
}
h2 {
font-size: 1.5em;
border-bottom: 1px solid #d0d7de;
padding-bottom: 0.3em;
margin-top: 48px;
margin-bottom: 16px;
}

h1 + * h2:first-of-type,
h2:first-of-type {
margin-top: 24px;
}

a[id] {
scroll-margin-top: 48px;
}
h3 {
font-size: 1.25em;
margin-top: 24px;
margin-bottom: 12px;
page-break-after: avoid;
break-after: avoid;
}

h2, h3 {
page-break-after: avoid;
}

ol, ul, li, p {
page-break-inside: auto;
}
code {
font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, "SF Mono", Consolas, monospace !important;
font-size: 13px !important;
font-weight: 500 !important;
background-color: #f6f8fa !important;
color: #24292f !important;
padding: 1px 3px !important;
border-radius: 3px !important;
white-space: nowrap;
word-break: break-word;
-webkit-print-color-adjust: exact !important;
print-color-adjust: exact !important;
text-decoration: none !important;
}
pre {
font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, "SF Mono", Consolas, monospace !important;
background-color: #f8f9fa !important;
border: 1px solid #e1e4e8 !important;
border-radius: 6px !important;
padding: 16px !important;
overflow: hidden !important;
white-space: pre-wrap !important;
word-wrap: break-word !important;
page-break-inside: avoid !important;
-webkit-print-color-adjust: exact !important;
print-color-adjust: exact !important;
font-size: 14px !important;
line-height: 1.4 !important;
display: block !important;
width: 100% !important;
max-width: 100% !important;
box-sizing: border-box !important;
text-decoration: none !important;
-webkit-text-decorations-in-effect: none !important;
font-variant-ligatures: none !important;
}

@media print {
pre {
white-space: pre !important;
font-family: "JetBrains Mono", monospace !important;
display: block !important;
text-decoration: none !important;
-webkit-text-decorations-in-effect: none !important;
font-variant-ligatures: none !important;
}
pre * {
white-space: pre !important;
text-decoration: none !important;
-webkit-text-decorations-in-effect: none !important;
font-variant-ligatures: none !important;
}
code {
text-decoration: none !important;
-webkit-text-decorations-in-effect: none !important;
font-variant-ligatures: none !important;
}
}
pre code {
background-color: transparent !important;
border: none !important;
padding: 0 !important;
color: #24292f !important;
text-decoration: none !important;
}
ul, ol {
padding-left: 1.8em;
margin-bottom: 12px;
}
li {
margin-bottom: 6px;
line-height: 1.4;
}

li:has(:first-child:is(text):contains("‚úÖ")) {
list-style-type: none;
margin-left: -1.8em;
padding-left: 1.8em;
}

li > ul > li:first-child,
li > ol > li:first-child {
margin-top: 8px;
}

li > ul > li > ul > li:first-child,
li > ol > li > ol > li:first-child {
margin-top: 6px;
}

@media print {
ul, ol {
display: block !important;
}
li {
display: list-item !important;
margin-bottom: 8px !important;
}

li > ul > li:first-child,
li > ol > li:first-child {
margin-top: 8px !important;
}
li > ul > li > ul > li:first-child,
li > ol > li > ol > li:first-child {
margin-top: 6px !important;
}

* {
box-sizing: border-box !important;
}
}
p {
margin-bottom: 12px;
}
a {
color: #0969da;
text-decoration: none;
}
strong {
font-weight: 500;
color: #2d3748;
white-space: normal;
word-spacing: normal;
letter-spacing: normal;
}

strong::before,
strong::after {
content: none;
margin: 0;
padding: 0;
}

table {
border-collapse: collapse;
border-spacing: 0;
width: 100%;
max-width: 100%;
margin: 16px 0;
font-size: 16px;
line-height: 1.5;
table-layout: auto;
word-wrap: break-word;
}
th, td {
padding: 12px 16px;
text-align: left;
vertical-align: top;
border: 1px solid #d0d7de;
word-wrap: break-word;
overflow-wrap: break-word;
hyphens: auto;
}
th {
font-weight: 500;
background-color: #f6f8fa;
color: #2d3748;
-webkit-print-color-adjust: exact !important;
print-color-adjust: exact !important;
}
tbody tr:nth-child(even) {
background-color: #f8f9fa;
-webkit-print-color-adjust: exact !important;
print-color-adjust: exact !important;
}

table code {
font-size: 14px !important;
padding: 2px 4px !important;
word-break: break-all;
}

blockquote {
border-left: 4px solid #d1d5db;
padding: 12px 16px;
margin: 20px 0;
background-color: transparent;
border-radius: 0;
-webkit-print-color-adjust: exact !important;
print-color-adjust: exact !important;
}
blockquote p {
margin: 0 0 8px 0;
}
blockquote p:last-child {
margin-bottom: 0;
}

blockquote strong {
margin: 0;
padding: 0;
display: inline;
white-space: normal;
}
blockquote code {
margin: 0;
padding: 1px 3px !important;
display: inline;
}
blockquote em {
margin: 0;
padding: 0;
display: inline;
}
blockquote a {
margin: 0;
padding: 0;
display: inline;
}

blockquote ul {
margin-top: 12px;
margin-bottom: 0;
padding-left: 1.8em;
}

blockquote:has(strong:first-child:contains("üí°")) {
border-left-color: #3b82f6;
}

blockquote:has(strong:first-child:contains("‚ö†Ô∏è")) {
border-left-color: #f59e0b;
}

blockquote:has(strong:first-child:contains("‚úÖ")) {
border-left-color: #10b981;
}

blockquote:has(strong:first-child:contains("‚ùå")) {
border-left-color: #ef4444;
}

blockquote:has(strong:first-child:contains("‚ÑπÔ∏è")) {
border-left-color: #6366f1;
}

blockquote:has(strong:first-child:contains("üéØ")) {
border-left-color: #8b5cf6;
}

@supports not (selector(:has(*))) {
blockquote {
border-left-color: #3b82f6;
}
}

table td:first-child {
width: 200px;
max-width: 250px;
}
table td:nth-child(2) {
width: auto;
}
table td:nth-child(3) {
width: auto;
}

table:not(:has(td:nth-child(3))) td:first-child {
width: auto !important;
max-width: none !important;
white-space: nowrap;
}
table:not(:has(td:nth-child(3))) td:nth-child(2) {
width: 100% !important;
max-width: none !important;
}

table {
page-break-inside: auto !important;
}
th {
page-break-after: avoid !important;
}
tbody tr {
page-break-inside: avoid !important;
page-break-after: auto !important;
}

thead {
display: table-header-group !important;
}

img {
max-width: 100%;
height: auto;
display: block;
margin: 16px auto;
page-break-inside: avoid;
}

em {
display: block;
text-align: center;
font-style: italic;
font-size: 14px;
color: #666;
margin-top: 8px;
margin-bottom: 16px;
}
@media print {
thead {
display: table-row-group !important;
}
table {
page-break-inside: auto !important;
}
tr {
page-break-inside: avoid !important;
}

blockquote {
-webkit-print-color-adjust: exact !important;
print-color-adjust: exact !important;
page-break-inside: avoid !important;
}

* {
overflow: visible !important;
scrollbar-width: none !important;
-ms-overflow-style: none !important;
}
*::-webkit-scrollbar {
display: none !important;
}
html, body {
overflow-x: hidden !important;
}
}
</style>
</head>
<body>
<h1 id="session-6-adding-question-caching">Session 6 ‚Äî Adding Question Caching</h1>
<p>You‚Äôre about to add browser storage and caching to your trivia game! This guide walks you through implementing localStorage to store API responses, building cache helper functions, and integrating caching into your existing fetch logic. Ready to make your game load instantly? Let‚Äôs go!</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#why-caching-matters">Why Caching Matters</a></li>
<li><a href="#browser-storage-and-localstorage">Browser Storage and localStorage</a></li>
<li><a href="#building-cache-helper-functions">Building Cache Helper Functions</a></li>
<li><a href="#updating-fetchquestions-with-caching">Updating fetchQuestions with Caching</a></li>
<li><a href="#testing-your-cache">Testing Your Cache</a></li>
<li><a href="#essential-terms">Essential Terms</a></li>
<li><a href="#ask-the-ai">Ask the AI</a></li>
</ul>
<p><a id="accessing-your-codespace"></a></p>
<h4 id="accessing-your-codespace">‚òÅÔ∏è Accessing Your Codespace</h4>
<p>Visit <a href="https://github.com/codespaces">github.com/codespaces</a> to relaunch your Codespace from the previous session.</p>
<p><a id="why-caching-matters"></a></p>
<h2 id="why-caching-matters">‚ö° Why Caching Matters</h2>
<p><strong>Caching</strong> stores data locally so you don‚Äôt need to fetch it repeatedly. Right now, every zone click triggers a network request to the OpenTrivia Database. This creates four problems:</p>
<ol type="1">
<li><strong>Slow loading</strong> - Network requests take time (milliseconds to seconds)</li>
<li><strong>Wasted bandwidth</strong> - Downloading identical questions repeatedly</li>
<li><strong>Rate limiting</strong> - APIs restrict request frequency (OpenTrivia allows one request per 5 seconds)</li>
<li><strong>Poor experience</strong> - Users wait for content they‚Äôve already seen</li>
</ol>
<p><strong>The solution:</strong> Store API responses in the browser. When users click a zone they‚Äôve visited before, your game returns cached questions instantly instead of making a network request.</p>
<blockquote>
<p>üí° <strong>Caching Across the Web</strong></p>
<p>Every major web application uses <strong>caching</strong> to improve performance. YouTube caches video thumbnails, Netflix caches show metadata, Instagram caches images. Your trivia game will cache question sets, applying the same performance optimization technique used across the web.</p>
</blockquote>
<p><a id="browser-storage-and-localstorage"></a></p>
<h2 id="browser-storage-and-localstorage">üóÑÔ∏è Browser Storage and localStorage</h2>
<p>The browser provides several storage mechanisms for saving data locally. Your game uses <code>localStorage</code>, a specific browser storage API that persists <strong>key-value pairs</strong> across sessions. Unlike temporary data that vanishes on page refresh, <code>localStorage</code> data persists until explicitly removed ‚Äî surviving browser restarts and even computer shutdowns.</p>
<h3 id="common-use-cases-for-localstorage">Common Use Cases for localStorage:</h3>
<ul>
<li><strong>User preferences</strong> - Theme, language, font size</li>
<li><strong>Game progress</strong> - Completed levels, high scores, settings</li>
<li><strong>Form data</strong> - Draft messages, shopping cart contents</li>
<li><strong>API responses</strong> - Cached data for faster loading</li>
</ul>
<h3 id="localstorage-operations">localStorage Operations:</h3>
<table>
<thead>
<tr class="header">
<th>Operation</th>
<th>Code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Create/Update</strong></td>
<td><code>localStorage.setItem(&#39;key&#39;, &#39;value&#39;)</code></td>
</tr>
<tr class="even">
<td><strong>Read</strong></td>
<td><code>const value = localStorage.getItem(&#39;key&#39;)</code></td>
</tr>
<tr class="odd">
<td><strong>Delete</strong></td>
<td><code>localStorage.removeItem(&#39;key&#39;)</code></td>
</tr>
<tr class="even">
<td><strong>Check</strong></td>
<td><code>if (localStorage.getItem(&#39;key&#39;)) { ... }</code></td>
</tr>
</tbody>
</table>
<h3 id="the-string-only-limitation">The String-Only Limitation</h3>
<p><code>localStorage</code> has one important constraint: <strong>it only stores strings</strong>. This means you can‚Äôt directly save JavaScript objects or arrays. To store your question data (which is an array of objects), you need two conversion processes:</p>
<p><strong>Serialization</strong> converts JavaScript data into a string format for storage:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">const</span> data <span class="op">=</span> [<span class="op">{</span> <span class="dt">question</span><span class="op">:</span> <span class="st">&quot;What is RAM?&quot;</span><span class="op">,</span> <span class="dt">answers</span><span class="op">:</span> [...] <span class="op">}</span>]<span class="op">;</span>  <span class="co">// [1] Data</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">const</span> text <span class="op">=</span> <span class="va">JSON</span>.<span class="at">stringify</span>(data)<span class="op">;</span>                            <span class="co">// [2] Convert</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="va">localStorage</span>.<span class="at">setItem</span>(<span class="st">&#39;trivia_zone_0&#39;</span><span class="op">,</span> text)<span class="op">;</span>                  <span class="co">// [3] Store</span></a></code></pre></div>
<p><strong>Deserialization</strong> converts the stored string back into JavaScript data:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">const</span> text <span class="op">=</span> <span class="va">localStorage</span>.<span class="at">getItem</span>(<span class="st">&#39;trivia_zone_0&#39;</span>)<span class="op">;</span>  <span class="co">// [1] Retrieve</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">const</span> data <span class="op">=</span> <span class="va">JSON</span>.<span class="at">parse</span>(text)<span class="op">;</span>                       <span class="co">// [2] Convert back</span></a></code></pre></div>
<p>Think of <strong>serialization</strong> like packing a suitcase for storage ‚Äî you‚Äôre converting complex items into a compact, storable format. <strong>Deserialization</strong> is unpacking that suitcase when you need to use those items again.</p>
<blockquote>
<p>üí° <strong>Why JSON for Serialization?</strong></p>
<p>JSON (JavaScript Object Notation) is the standard format for <strong>serialization</strong> because it‚Äôs human-readable, compact, and JavaScript has built-in methods (<code>JSON.stringify()</code> and <code>JSON.parse()</code>) for conversion. When you see serialized data in DevTools, you‚Äôll recognize the JSON structure from previous API work.</p>
</blockquote>
<p><a id="building-cache-helper-functions"></a></p>
<h2 id="building-cache-helper-functions">üîß Building Cache Helper Functions</h2>
<p>üéØ <strong>Goal:</strong> Create three helper functions that handle localStorage operations for caching questions.</p>
<p><strong>File:</strong> <code>src/services/trivia.js</code></p>
<p>Helper functions abstract <code>localStorage</code> complexity into clean, reusable pieces. You‚Äôll build three functions that work together:</p>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>Purpose</th>
<th>Key Operation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>getCacheKey</code></td>
<td>Creates unique identifiers</td>
<td>Generates consistent cache keys</td>
</tr>
<tr class="even">
<td><code>getCachedQuestions</code></td>
<td>Retrieves stored data</td>
<td><strong>Deserialization</strong> with <code>JSON.parse()</code></td>
</tr>
<tr class="odd">
<td><code>setCachedQuestions</code></td>
<td>Stores new data</td>
<td><strong>Serialization</strong> with <code>JSON.stringify()</code></td>
</tr>
</tbody>
</table>
<h3 id="step-1-add-key-generation">Step 1: Add key generation</h3>
<p>Add the <code>getCacheKey</code> function after the existing helper functions (<code>decodeText</code>, <code>shuffleAnswers</code>, etc.).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="co">// After existing helper functions, add:</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="kw">function</span> <span class="at">getCacheKey</span>(zoneId) <span class="op">{</span>                 <span class="co">// [1] Accept zone ID</span></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="cf">return</span> <span class="vs">`trivia_questions_zone_</span><span class="sc">${</span>zoneId<span class="sc">}</span><span class="vs">`</span><span class="op">;</span>    <span class="co">// [2] Build unique key</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="op">}</span></a></code></pre></div>
<blockquote>
<p>üí° <strong>Understanding Key Generation</strong></p>
<ol type="1">
<li><strong>Accept zone ID</strong>: Function takes the zone identifier as input</li>
<li><strong>Build unique key</strong>: Creates keys like <code>trivia_questions_zone_0</code>, <code>trivia_questions_zone_1</code>, etc.</li>
</ol>
<p>Consistent key generation ensures you always look up the same cache entry for each zone.</p>
</blockquote>
<h3 id="step-2-add-cache-retrieval">Step 2: Add cache retrieval</h3>
<p>Add the <code>getCachedQuestions</code> function after <code>getCacheKey</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">function</span> <span class="at">getCachedQuestions</span>(zoneId) <span class="op">{</span>          <span class="co">// [1] Accept zone ID</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="kw">const</span> key <span class="op">=</span> <span class="at">getCacheKey</span>(zoneId)<span class="op">;</span>             <span class="co">// [2] Get cache key</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="kw">const</span> cached <span class="op">=</span> <span class="va">localStorage</span>.<span class="at">getItem</span>(key)<span class="op">;</span>    <span class="co">// [3] Retrieve from storage</span></a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="cf">return</span> cached <span class="op">?</span> <span class="va">JSON</span>.<span class="at">parse</span>(cached) : <span class="kw">null</span><span class="op">;</span>   <span class="co">// [4] Parse or return null</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="op">}</span></a></code></pre></div>
<blockquote>
<p>üí° <strong>Understanding Cache Retrieval</strong></p>
<ol type="1">
<li><strong>Accept zone ID</strong>: Function takes the zone identifier as input</li>
<li><strong>Get cache key</strong>: Use <code>getCacheKey()</code> to create the correct key</li>
<li><strong>Retrieve from storage</strong>: Get the stored string from <code>localStorage</code> (or <code>null</code> if not found)</li>
<li><strong>Parse or return null</strong>: If data exists, parse JSON to JavaScript object; otherwise return <code>null</code></li>
</ol>
<p>The <strong>ternary operator</strong> <code>cached ? JSON.parse(cached) : null</code> handles both cases in one line.</p>
</blockquote>
<h3 id="step-3-add-cache-storage">Step 3: Add cache storage</h3>
<p>Add the <code>setCachedQuestions</code> function after <code>getCachedQuestions</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">function</span> <span class="at">setCachedQuestions</span>(zoneId<span class="op">,</span> questions) <span class="op">{</span>          <span class="co">// [1] Accept parameters</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="kw">const</span> key <span class="op">=</span> <span class="at">getCacheKey</span>(zoneId)<span class="op">;</span>                        <span class="co">// [2] Get cache key</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="va">localStorage</span>.<span class="at">setItem</span>(key<span class="op">,</span> <span class="va">JSON</span>.<span class="at">stringify</span>(questions))<span class="op">;</span>   <span class="co">// [3] Serialize</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="op">}</span></a></code></pre></div>
<blockquote>
<p>üí° <strong>Understanding Cache Storage</strong></p>
<ol type="1">
<li><strong>Accept parameters</strong>: Function takes the zone identifier and questions array as input</li>
<li><strong>Get cache key</strong>: Use <code>getCacheKey()</code> to create the correct key</li>
<li><strong>Serialize and store</strong>: <code>localStorage</code> only stores strings, so <code>JSON.stringify()</code> converts the questions array to text format before storage</li>
</ol>
<p>This pattern ‚Äî wrapping complex operations in simple functions ‚Äî is called <strong>abstraction</strong> and makes code easier to test, debug, and maintain.</p>
</blockquote>
<p><a id="updating-fetchquestions-with-caching"></a></p>
<h2 id="updating-fetchquestions-with-caching">üîÑ Updating fetchQuestions with Caching</h2>
<p>üéØ <strong>Goal:</strong> Integrate cache functions into <code>fetchQuestions</code> to check cache before fetching and store results after fetching.</p>
<p><strong>File:</strong> <code>src/services/trivia.js</code></p>
<p>You‚Äôll add caching to <code>fetchQuestions</code> in two places: check cache at the start, store results at the end.</p>
<h3 id="step-1-add-cache-checking">Step 1: Add cache checking</h3>
<p>Add cache checking at the beginning of <code>fetchQuestions</code>, before the zone lookup.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="im">export</span> <span class="kw">async</span> <span class="kw">function</span> <span class="at">fetchQuestions</span>(zoneId<span class="op">,</span> count <span class="op">=</span> <span class="kw">null</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="co">// Add cache check:</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="kw">const</span> cachedQuestions <span class="op">=</span> <span class="at">getCachedQuestions</span>(zoneId)<span class="op">;</span>  <span class="co">// [1] Check cache</span></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="cf">if</span> (cachedQuestions) <span class="op">{</span>                               <span class="co">// [2] If found</span></a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`Cache hit for zone </span><span class="sc">${</span>zoneId<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span>       <span class="co">// [3] Log hit</span></a>
<a class="sourceLine" id="cb6-6" title="6">    <span class="cf">return</span> cachedQuestions<span class="op">;</span>                            <span class="co">// [4] Return early</span></a>
<a class="sourceLine" id="cb6-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb6-8" title="8"></a>
<a class="sourceLine" id="cb6-9" title="9">  <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`Cache miss for zone </span><span class="sc">${</span>zoneId<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span>        <span class="co">// [5] Log miss</span></a>
<a class="sourceLine" id="cb6-10" title="10"></a>
<a class="sourceLine" id="cb6-11" title="11">  <span class="kw">const</span> zone <span class="op">=</span> <span class="at">getZoneById</span>(zoneId)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-12" title="12">  <span class="co">// ... rest of existing code ...</span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="op">}</span></a></code></pre></div>
<blockquote>
<p>üí° <strong>Understanding Cache Checking</strong></p>
<ol type="1">
<li><strong>Check cache</strong>: Call <code>getCachedQuestions()</code> to see if we have stored questions for this zone</li>
<li><strong>If found</strong>: <strong>Cache hit</strong> ‚Äî we have the data already</li>
<li><strong>Log hit</strong>: Record the cache hit for debugging</li>
<li><strong>Return early</strong>: Skip the entire API request and return cached data immediately</li>
<li><strong>Log miss</strong>: If cache is empty, record the miss before fetching from API</li>
</ol>
<p>The early return in step 4 is crucial ‚Äî it prevents the expensive API request from executing when cached data exists. If <code>getCachedQuestions()</code> returns <code>null</code> (<strong>cache miss</strong>), execution continues past the if block to fetch fresh data.</p>
</blockquote>
<p><strong>‚úì You should see:</strong> When clicking a zone for the first time, console shows <code>Cache miss for zone X</code>.</p>
<h3 id="step-2-add-cache-storage">Step 2: Add cache storage</h3>
<p>Add cache storage after the data transformation, before the return statement.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="im">export</span> <span class="kw">async</span> <span class="kw">function</span> <span class="at">fetchQuestions</span>(zoneId<span class="op">,</span> count <span class="op">=</span> <span class="kw">null</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="co">// ... existing code ...</span></a>
<a class="sourceLine" id="cb7-3" title="3">  </a>
<a class="sourceLine" id="cb7-4" title="4">  <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-5" title="5">    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(url)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-6" title="6">    <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="va">response</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb7-7" title="7"></a>
<a class="sourceLine" id="cb7-8" title="8">    <span class="kw">const</span> questions <span class="op">=</span> <span class="va">data</span>.<span class="va">results</span>.<span class="at">map</span>((apiQuestion) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb7-9" title="9">      <span class="at">transformQuestion</span>(apiQuestion)</a>
<a class="sourceLine" id="cb7-10" title="10">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb7-11" title="11"></a>
<a class="sourceLine" id="cb7-12" title="12">    <span class="co">// Add cache storage:</span></a>
<a class="sourceLine" id="cb7-13" title="13">    <span class="at">setCachedQuestions</span>(zoneId<span class="op">,</span> questions)<span class="op">;</span>  <span class="co">// Store questions for this zone</span></a>
<a class="sourceLine" id="cb7-14" title="14"></a>
<a class="sourceLine" id="cb7-15" title="15">    <span class="cf">return</span> questions<span class="op">;</span></a>
<a class="sourceLine" id="cb7-16" title="16">  <span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-17" title="17">    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;Failed to fetch questions:&quot;</span><span class="op">,</span> error)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-18" title="18">    <span class="cf">return</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb7-19" title="19">  <span class="op">}</span></a>
<a class="sourceLine" id="cb7-20" title="20"><span class="op">}</span></a></code></pre></div>
<blockquote>
<p>üí° <strong>Understanding Cache Storage</strong></p>
<p>After successfully fetching and transforming questions from the API, call <code>setCachedQuestions()</code> to store them in <code>localStorage</code>. The next time this zone is clicked, Step 1‚Äôs cache check will find this stored data and return it immediately, skipping the API request entirely.</p>
</blockquote>
<p><strong>‚úì You should see:</strong> After clicking a zone, clicking it again shows <code>Cache hit for zone X</code> in console.</p>
<p><a id="testing-your-cache"></a></p>
<h2 id="testing-your-cache">üß™ Testing Your Cache</h2>
<p>üéØ <strong>Goal:</strong> Verify your caching system works by observing cache misses, hits, and persistence using DevTools.</p>
<p>You‚Äôll test the complete caching flow: first load (cache miss), repeat load (cache hit), browser refresh (persistence), and manual clear (cache reset).</p>
<pre class="mermaid"><code>graph LR
    A[User clicks zone] --&gt; B{Check cache}
    B --&gt;|Cache hit| C[Return cached data]
    B --&gt;|Cache miss| D[Fetch from API]
    D --&gt; E[Store in cache]
    E --&gt; F[Return data]</code></pre>
<h3 id="step-1-open-devtools-and-clear-existing-cache">Step 1: Open DevTools and clear existing cache</h3>
<p>Press <code>F12</code> or right-click ‚Üí Inspect to open your browser‚Äôs developer tools.</p>
<p><strong>Navigate to the storage panel:</strong></p>
<table>
<thead>
<tr class="header">
<th>Browser</th>
<th>Storage Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Chrome/Edge</td>
<td>Application tab ‚Üí Local Storage</td>
</tr>
<tr class="even">
<td>Firefox</td>
<td>Storage tab ‚Üí Local Storage</td>
</tr>
<tr class="odd">
<td>Safari</td>
<td>Storage tab ‚Üí Local Storage</td>
</tr>
</tbody>
</table>
<ul>
<li>In the sidebar, <strong>expand</strong> Local Storage</li>
<li><strong>Click</strong> your site‚Äôs domain (e.g., <code>http://localhost:5173</code>)</li>
<li>If any <code>trivia_questions_zone_</code> entries exist, <strong>right-click</strong> each ‚Üí Delete</li>
</ul>
<p><strong>‚úì You should see:</strong> Local Storage panel with no trivia cache entries.</p>
<h3 id="step-2-observe-a-cache-miss">Step 2: Observe a cache miss</h3>
<p>Test the first-time load behavior when no cached data exists.</p>
<ul>
<li><strong>Click</strong> ‚ÄúStart Game‚Äù and click any zone for the first time</li>
<li>In the <strong>Console tab</strong> (same DevTools panel), <strong>look</strong> for <code>Cache miss for zone X</code></li>
<li>In the Local Storage panel, <strong>observe</strong>:
<ul>
<li>A new entry appears: <code>trivia_questions_zone_0</code></li>
<li>It contains <strong>serialized</strong> JSON data</li>
</ul></li>
<li><strong>Click</strong> the entry to inspect the cached questions</li>
</ul>
<p><strong>‚úì You should see:</strong> Console shows cache miss, Local Storage shows new entry with question data.</p>
<h3 id="step-3-confirm-a-cache-hit">Step 3: Confirm a cache hit</h3>
<p>Test the repeat load behavior when cached data exists.</p>
<ul>
<li><strong>Click</strong> the same zone again</li>
<li>In the Console tab, <strong>look</strong> for <code>Cache hit for zone X</code></li>
<li>In the Local Storage panel, <strong>verify</strong>:
<ul>
<li>The entry remains unchanged</li>
<li>No new network request in Network tab</li>
</ul></li>
</ul>
<p><strong>‚úì You should see:</strong> Console shows cache hit, questions load instantly, no API request.</p>
<h3 id="step-4-test-cache-persistence">Step 4: Test cache persistence</h3>
<p>Verify cached data survives browser refresh.</p>
<ul>
<li><strong>Refresh</strong> the browser (<code>Ctrl+R</code> or <code>Cmd+R</code>)</li>
<li><strong>Click</strong> ‚ÄúStart Game‚Äù and click the same zone</li>
<li><strong>Observe</strong>:
<ul>
<li>Console shows <code>Cache hit for zone X</code></li>
<li>Local Storage entry still present</li>
</ul></li>
</ul>
<p><strong>‚úì You should see:</strong> Cached data persists after refresh, questions still load instantly.</p>
<h3 id="step-5-test-cache-reset">Step 5: Test cache reset</h3>
<p>Verify the system handles cache deletion correctly.</p>
<ul>
<li>In the Local Storage panel, <strong>right-click</strong> the cache entry ‚Üí Delete</li>
<li><strong>Click</strong> the zone again</li>
<li><strong>Observe</strong>:
<ul>
<li>Console shows <code>Cache miss for zone X</code></li>
<li>Entry repopulates with fresh data</li>
</ul></li>
</ul>
<p><strong>‚úì You should see:</strong> After deletion, system fetches fresh data and recreates cache entry.</p>
<blockquote>
<p>üí° <strong>Debugging with DevTools</strong></p>
<p>You‚Äôve learned to trace data flow through your application by watching console logs, inspecting browser storage, and monitoring network requests. This debugging approach ‚Äî following the digital breadcrumbs your code leaves behind ‚Äî is how developers diagnose crashes, performance issues, and unexpected behavior. These skills apply to any web application you build.</p>
</blockquote>
<blockquote>
<p>‚ÑπÔ∏è <strong>The Cache-Aside Pattern</strong></p>
<p>You‚Äôve implemented the <strong>cache-aside pattern</strong> used across modern applications: check cache first, on <strong>cache miss</strong> fetch from source, store result in cache, return data. This pattern (check in Step 1, store in Step 2) ensures your game only makes API requests when necessary. You just verified this pattern works by observing cache misses, hits, and persistence.</p>
</blockquote>
<p><a id="essential-terms"></a></p>
<h2 id="essential-terms">üìö Essential Terms</h2>
<p><em>Quick reference for all the caching and browser storage concepts you just learned:</em></p>
<table>
<colgroup>
<col style="width: 22%"></col>
<col style="width: 33%"></col>
<col style="width: 44%"></col>
</colgroup>
<thead>
<tr class="header">
<th>Term</th>
<th>Definition</th>
<th>Why it matters</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>‚ö° caching</td>
<td>Storing frequently accessed data in fast storage to avoid expensive operations like network requests.</td>
<td>Makes your game feel instant and responsive by eliminating repeated API calls for the same questions.</td>
</tr>
<tr class="even">
<td>üö¶ rate limiting</td>
<td>API restrictions on request frequency to prevent server overload and ensure fair usage.</td>
<td>OpenTrivia Database limits requests to once every 5 seconds ‚Äî caching helps avoid these limits.</td>
</tr>
<tr class="odd">
<td>üíæ localStorage</td>
<td>Browser storage API that persists data as key-value pairs across sessions and page refreshes.</td>
<td>Your trivia questions stay cached even after closing and reopening the browser, providing instant loading.</td>
</tr>
<tr class="even">
<td>üîë key-value pairs</td>
<td>Data storage format where each piece of information has a unique identifier (key) and associated data (value).</td>
<td><code>localStorage</code> uses this format: your cache keys identify zones, values contain question data.</td>
</tr>
<tr class="odd">
<td>üì¶ serialization</td>
<td>Converting JavaScript objects into text format for storage using JSON.stringify().</td>
<td><code>localStorage</code> only stores strings, so your question objects must be serialized before storage.</td>
</tr>
<tr class="even">
<td>üîÑ deserialization</td>
<td>Converting stored text back into JavaScript objects using JSON.parse().</td>
<td>Transforms cached text back into usable question objects for your game.</td>
</tr>
<tr class="odd">
<td>üéØ cache hit</td>
<td>When requested data is found in cache and can be returned immediately without external requests.</td>
<td>Your zones load instantly on subsequent clicks, providing smooth user experience.</td>
</tr>
<tr class="even">
<td>üîç cache miss</td>
<td>When requested data is not in cache and must be fetched from the original source.</td>
<td>Triggers API request to OpenTrivia Database and stores result for future cache hits.</td>
</tr>
<tr class="odd">
<td>‚ùì ternary operator</td>
<td>Concise conditional syntax using ? and : for simple if/else logic in expressions.</td>
<td>Used in your cache retrieval: <code>cached ? JSON.parse(cached) : null</code> ‚Äî clean and readable.</td>
</tr>
</tbody>
</table>
<p><a id="ask-the-ai"></a></p>
<h2 id="ask-the-ai-adding-question-caching">ü§ñ Ask the AI ‚Äî Adding Question Caching</h2>
<p>You just built your first caching system with localStorage and helper functions ‚Äî great work!</p>
<p>Here are some key questions to ask your AI assistant to deepen your understanding of what you just built:</p>
<ul>
<li><strong>Why is caching so important for web apps and user experience?</strong></li>
<li><strong>What happens when I use JSON.stringify and JSON.parse with my question data?</strong></li>
<li><strong>Why do we need helper functions like getCacheKey and getCachedQuestions?</strong></li>
<li><strong>What would happen if I didn‚Äôt have caching in my trivia game?</strong></li>
<li><strong>How can I use the browser DevTools to debug localStorage issues?</strong></li>
</ul>
</body>
</html>
